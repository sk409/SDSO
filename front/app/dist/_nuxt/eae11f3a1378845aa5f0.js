(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{320:function(t,e,r){var content=r(337);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(20).default)("0fb0e964",content,!0,{sourceMap:!1})},332:function(t,e,r){"use strict";var n=r(7),o=r(333)(6),c="findIndex",l=!0;c in[]&&Array(1)[c]((function(){l=!1})),n(n.P+n.F*l,"Array",{findIndex:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),r(126)(c)},333:function(t,e,r){var n=r(41),o=r(125),c=r(42),l=r(30),f=r(334);t.exports=function(t,e){var r=1==t,d=2==t,m=3==t,v=4==t,h=6==t,x=5==t||h,_=e||f;return function(e,f,k){for(var I,S,y=c(e),D=o(y),N=n(f,k,3),$=l(D.length),C=0,j=r?_(e,$):d?_(e,0):void 0;$>C;C++)if((x||C in D)&&(S=N(I=D[C],C,y),t))if(r)j[C]=S;else if(S)switch(t){case 3:return!0;case 5:return I;case 6:return C;case 2:j.push(I)}else if(v)return!1;return h?-1:m||v?v:j}}},334:function(t,e,r){var n=r(335);t.exports=function(t,e){return new(n(t))(e)}},335:function(t,e,r){var n=r(11),o=r(180),c=r(2)("species");t.exports=function(t){var e;return o(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!o(e.prototype)||(e=void 0),n(e)&&null===(e=e[c])&&(e=void 0)),void 0===e?Array:e}},336:function(t,e,r){"use strict";var n=r(320);r.n(n).a},337:function(t,e,r){(t.exports=r(19)(!1)).push([t.i,".test{padding:.8rem;margin-bottom:1.5rem;background:#fafafa;border:1px solid #d3d3d3}.test-status{color:#fff;padding:.25rem}.marker{display:inline-block;width:10px;height:100%}.output{background:#000;color:#fff;padding:1rem}",""])},352:function(t,e,r){"use strict";r.r(e);r(332);var n=null,o=null;function c(t){var e=["rgb(130, 209, 226)","rgb(107, 197, 143)","rgb(220, 102, 97)"];return"number"==typeof t?e[t-1]:"SUCCESS"===t?e[1]:"FAILED"===t?e[2]:e[0]}function l(t){if(t.results){if(-1!==t.results.findIndex((function(t){return 3===t.TestStatusID})))return"FAILED";var e=t.results.findIndex((function(t){return 1===t.TestStatusID}));return t.results.length<t.Steps||-1!==e?"RUNNING":"SUCCESS"}}var f={layout:"Project",data:function(){return{activeNames:[],project:null,tests:[]}},computed:{pathParamUserName:function(){return this.$route.params.userName},pathParamProjectName:function(){return this.$route.params.projectName?this.$route.params.projectName:this.$route.params.pathMatch}},created:function(){this.setupSocket(),this.fetchData()},methods:{testResultStyle:function(t){if(t.results)return{background:c(l(t))}},testResultText:function(t){return l(t)},markerStyle:function(t){return{background:c(t)}},setupSocket:function(){if(WebSocket){n=new WebSocket("ws://localhost:8080/test_socket");var t=this;n.onmessage=function(e){var r=JSON.parse(e.data);r.results=[],t.tests.unshift(r)},new WebSocket("ws://localhost:8080/test_result_socket").onmessage=function(e){var r=JSON.parse(e.data),n=t.tests.findIndex((function(t){return t.ID===r.TestID}));if(-1!==n){var o=t.tests[n].results.findIndex((function(tr){return tr.ID===r.ID}));-1!==o?t.$set(t.tests[n].results,o,r):t.tests[n].results.push(r)}}}else alert("WebSocketに対応していないブラウザです。")},fetchData:function(){var t=this,data={name:this.pathParamUserName};this.$ajax.get(this.$urls.users,data,{},(function(e){if(200===e.status){o=e.data[0];var data={name:t.$route.params.projectName,user_id:o.ID};t.$ajax.get(t.$urls.projects,data,{},(function(e){if(200===e.status){t.project=e.data[0];var data={project_id:t.project.ID};t.$ajax.get(t.$urls.tests,data,{},(function(e){200===e.status&&(t.tests=e.data.sort((function(a,b){return a.CreatedAt<b.CreatedAt?1:-1})),e.data.forEach((function(e,r){t.activeNames.push([]);var data={test_id:e.ID};t.$ajax.get(t.$urls.testResults,data,{},(function(e){200===e.status&&t.$set(t.tests[r],"results",e.data)}))})))}))}}))}}))}}},d=(r(336),r(6)),component=Object(d.a)(f,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",t._l(t.tests,(function(e,n){return r("div",{key:e.ID,staticClass:"test"},[r("div",{staticClass:"d-flex align-items-center mb-2"},[r("div",{staticClass:"test-status",style:t.testResultStyle(e)},[t._v(t._s(t.testResultText(e)))]),t._v(" "),r("div",{staticClass:"ml-auto"},[t._v(t._s(t._f("formatDate")(e.CreatedAt)))])]),t._v(" "),r("el-collapse",{model:{value:t.activeNames[n],callback:function(e){t.$set(t.activeNames,n,e)},expression:"activeNames[index]"}},t._l(e.results,(function(e){return r("el-collapse-item",{key:e.ID,attrs:{name:e.ID}},[r("template",{slot:"title"},[r("span",{staticClass:"marker",style:t.markerStyle(e.TestStatusID)}),t._v(" "),r("span",{staticClass:"ml-2"},[t._v(t._s(e.Command))])]),t._v(" "),r("div",{staticClass:"p-2"},[r("pre",{staticClass:"output"},[t._v(t._s(e.Output))])])],2)})),1)],1)})),0)}),[],!1,null,null,null);e.default=component.exports}}]);