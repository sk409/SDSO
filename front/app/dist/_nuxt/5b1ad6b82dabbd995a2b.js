(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{322:function(e,t,r){var content=r(341);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(20).default)("270a6ba8",content,!0,{sourceMap:!1})},323:function(e,t,r){var content=r(343);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(20).default)("d12c2874",content,!0,{sourceMap:!1})},340:function(e,t,r){"use strict";var n=r(322);r.n(n).a},341:function(e,t,r){(e.exports=r(19)(!1)).push([e.i,".repository-files[data-v-56f6f4e2]{border:1px solid silver}.file-item[data-v-56f6f4e2]:hover{background:#f0f0f0}.file-item-name[data-v-56f6f4e2]{color:#4278d4}.file-item-name[data-v-56f6f4e2]:hover{cursor:pointer;text-decoration:underline}",""])},342:function(e,t,r){"use strict";var n=r(323);r.n(n).a},343:function(e,t,r){(e.exports=r(19)(!1)).push([e.i,"#editor[data-v-16fcf024]{height:500px}",""])},346:function(e,t,r){"use strict";r.r(t);r(83),r(31),r(21),r(85),r(127),r(84),r(124),r(128);var n={name:"RepositoryFiles",props:{files:{type:Array,required:!0}},methods:{fileNameClicked:function(e){this.$emit("click-file-name",e)}}},o=(r(340),r(6)),c=Object(o.a)(n,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"repository-files"},e._l(e.files,(function(t,n){return r("div",{key:t.name,staticClass:"file-item p-2",class:{"border-bottom":n!=e.files.length-1}},[r("i",{class:{"el-icon-document":!t.isDirectory,"el-icon-folder":t.isDirectory}}),e._v(" "),r("span",{staticClass:"file-item-name",on:{click:function(r){return e.fileNameClicked(t)}}},[e._v(e._s(t.name))])])})),0)}),[],!1,null,"56f6f4e2",null).exports,l=null,h=null,f=null,d={layout:"Project",components:{FileTable:c},data:function(){return{childFile:null,children:[],parent:null}},computed:{pathParamUserName:function(){return this.$route.params.userName},pathParamProjectName:function(){return this.$route.params.projectName?this.$route.params.projectName:this.$route.params.pathMatch}},created:function(){var e=this;l=this.$route.params.projectName?this.$route.params.projectName:this.$route.params.pathMatch;var data={name:this.pathParamUserName};this.$ajax.get(this.$urls.users,data,{},(function(t){if(200===t.status){h=t.data[0];var r=e.$routes.projectCode(h.Name,l)+"/",path=e.$route.path.startsWith(r)?e.$route.path.substring(r.length):"";if(""===path)e.fetchFiles(path);else{var n="";if(path.includes("/")){var o=path.split("/");n=o.slice(0,o.length-1).join("/")}var c={userName:h.Name,projectName:l,path:n};e.$ajax.get(e.$urls.files,c,{},(function(t){for(var r=0,n=Object.keys(t.data);r<n.length;r++){var o=n[r];if(t.data[o].path===path){e.parent=t.data[o];break}}e.parent&&e.parent.isDirectory?e.fetchFiles(path):e.fetchFileText(path)}))}}}))},watch:{childFile:function(e){var t={php:"php",js:"javascript"},r=Object.keys(t).includes(e.extension)?t[e.extension]:"text";(f=ace.edit("editor")).$blockScrolling=1/0,f.setOptions({enableBasicAutocompletion:!0,enableSnippets:!1,enableLiveAutocompletion:!0}),f.setTheme("ace/theme/monokai"),f.getSession().setMode("ace/mode/"+r),f.setFontSize(20),f.setValue(this.childFile?this.childFile.text:"")}},methods:{fileNameClicked:function(e){this.$router.push(this.$routes.projectCode(h.Name,l,e.path))},fetchFileText:function(path){var e=this,data={userName:h.Name,projectName:l,path:path};this.$ajax.get(this.$urls.filesText,data,{},(function(t){var s=e.$route.path.split(".");e.childFile={text:t.data},s.length&&(e.childFile.extension=s[s.length-1])}))},fetchFiles:function(path){var e=this,data={userName:h.Name,projectName:l,path:path};this.$ajax.get(this.$urls.files,data,{},(function(t){e.children=[];for(var r=0,n=Object.keys(t.data);r<n.length;r++){var o=n[r];e.children.push({path:t.data[o].path,name:o,isDirectory:t.data[o].isDirectory})}e.children=e.children.sort((function(a,b){return a.isDirectory&&!b.isDirectory?-1:!a.isDirectory&&b.isDirectory?1:a.name<b.name?-1:1}))}))}}},m=(r(342),Object(o.a)(d,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",[this.parent&&!this.parent.isDirectory?t("div",[t("div",{attrs:{id:"editor"}})]):t("div",[t("FileTable",{attrs:{files:this.children},on:{"click-file-name":this.fileNameClicked}})],1),this._v(" "),t("script",{attrs:{src:"https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.0/ace.js"}}),this._v(" "),t("script",{attrs:{src:"https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.0/ext-language_tools.js"}})])}),[],!1,null,"16fcf024",null));t.default=m.exports}}]);